{"title":"Qualitative Data","markdown":{"headingText":"Qualitative Data","headingAttr":{"id":"sec-qual","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo=TRUE, eval=TRUE, comment=NA)\nlibrary(webexercises)\nlibrary(PASWR2)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(ggplot2)\nlibrary(tidyverse)\n```\n\nQualitative data is the term used when a variable has different categories or groups or levels. This could be things such as students' grades, the genders of patients in an experiment or which treatment subjects have been given. There are several ways that qualitative data can be summarised and presented.\n\n---\n\nDetails on summarising univariate qualitative data and creating suitable graphical displays are also covered in [Section 2.3 Displaying Qualitative Data](https://read.kortext.com/reader/pdf/92741/98){target=\"_blank\"} in *Probability and Statistics with R*.\n\n\n## Tables {#sec-tables}\n\nFrequency tables summarise qualitative data by showing the different groups/categories in a variable and the corresponding frequency with which they occur - that is, how many observations fall into each category.\n\nFrequency tables can be created in R using the `table()` function. We have already seen `table()` used in [Lab 3](https://moodle.gla.ac.uk/pluginfile.php/9073238/mod_resource/content/2/02-data.html#summarising-data){target=\"_blank\"}, but let's revisit it with an example.\n\nThe data set `EPIDURAL` from the package `PASWR2` contains information on 85 patients from a study used to determine whether administering epidural anesthesia (a pain relief administered in the back) to pregnant women in labour is better whilst they are in the traditional sitting position, or when they are in a \"hamstring stretch\" position. This contains several variables relating to each patient and the treatment they receive (to see more about what each of these variables describes, run the code `help(\"EPIDURAL\")`).\n\nWe can load the data frame into our **Environment** tab and look at the first five rows using the following code (make sure you have installed the `PASWR2` package on whatever device you are using R with beforehand).\n\n::: panel-tabset\n## R Code\n```{r qual1.1, eval = FALSE}\nlibrary(PASWR2)\n\ndata(\"EPIDURAL\")\nhead(EPIDURAL)\n```\n\n## Output\n```{r qual1.2, echo = FALSE}\nlibrary(PASWR2)\n\ndata(\"EPIDURAL\")\nhead(EPIDURAL)\n```\n:::\n\nThe variable `ease` is a factor variable which tells how easy the physician found it to locate where the epidural anesthesia should be administered for each patient. It has levels `\"Easy\"`, `\"Difficult\"` and `\"Impossible\"`.\n\nWe can summarise the number of patients that fall into each level of the `ease` variable using the `table()` function as follows.\n\n::: panel-tabset\n## R Code\n```{r qual2.1, eval = FALSE}\nepi_freq <- table(EPIDURAL$ease)\nepi_freq\n```\n\n## Output\n```{r qual2.2, echo = FALSE}\nepi_freq <- table(EPIDURAL$ease)\nepi_freq\n```\n:::\n\nThis frequency table shows us that there are 57 patients in the data set for whom it was easy to administer the anesthetic, 20 who it was difficult for and 8 for whom it was impossible to find where to administer the anesthetic.\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container}\nThe levels of `ease` are automatically presented in alphabetical order. Can you reorder the labels so that they go in the order `\"Easy\"`, `\"Difficult\"` and `\"Impossible\"`?\n\n`r hide(\"Hint\")`\nYou will need to use the function `factor()` and the argument `levels =` in order to reorder the levels of a factor. You can look back at [Lab 2](https://moodle.gla.ac.uk/pluginfile.php/9073095/mod_resource/content/3/02-data.html#sec-fact){target=\"_blank\"} to remind yourself how to use the `factor()` function.\n`r unhide()`\n\n`r hide(\"Solution\")`\n::: panel-tabset\n## R Code\n```{r qual-ans1.1.1, eval = FALSE}\nEPIDURAL$ease <- factor(x = EPIDURAL$ease,\n                        levels = c(\"Easy\", \"Difficult\", \"Impossible\"))\nlevels(EPIDURAL$ease)\n```\n\n## Output\n```{r qual-ans1.1.2, echo = FALSE}\nEPIDURAL$ease <- factor(x = EPIDURAL$ease,\n                        levels = c(\"Easy\", \"Difficult\", \"Impossible\"))\nlevels(EPIDURAL$ease)\n```\n:::\n\nThe function `levels()` can be used to see the levels of a factor variable, as well as the order they are stored in.\n\nWe can update the frequency table `epi_freq` so that the different levels of `ease` now appear in a sensible order.\n\n::: panel-tabset\n## R Code\n```{r qual-ans1.2.1, eval = FALSE}\nepi_freq <- table(EPIDURAL$ease)\nepi_freq\n```\n\n## Output\n```{r qual-ans1.2.2, echo = FALSE}\nepi_freq <- table(EPIDURAL$ease)\nepi_freq\n```\n:::\n`r unhide()`\n::::\n:::\n\nWe could also create a table showing the proportion of the total number of patients which fall into each level of `ease` using `prop.table()`. We need to make sure that we give a pre-existing table to this function. We can use the table `epi_freq` created above.\n\n::: panel-tabset\n## R Code\n```{r qual3.1, eval = FALSE}\nepi_prop <- prop.table(epi_freq)\nepi_prop\n```\n\n## Output\n```{r qual3.2, echo = FALSE}\nepi_prop <- prop.table(epi_freq)\nepi_prop\n```\n:::\n\nNow we can see that it was easy to find where to administer the anesthetic for roughly 67% of patients, difficult for roughly 24% and impossible for 9% of patients.\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container}\nThe `TITANIC3` data set from the `PASWR2` package contains information on the survival status of passengers on the Titanic. Load this data set into your Environment tab and create a frequency table showing the number of passengers who survived and the number who did not.\n\nRemember to explore the data set using the `help()` and `str()` functions. It might help to rename the levels of the `survived` variable so they are clear.\n\n`r hide(\"Solution\")`\n::: panel-tabset\n## R Code\n```{r qual-ans2.1, eval = FALSE}\ndata(\"TITANIC3\")\n\nTITANIC3$survived <- factor(x = TITANIC3$survived, labels = c(\"No\", \"Yes\"))\n\ntable(TITANIC3$survived)\n```\n\n## Output\n```{r qual-ans2.2, echo = FALSE}\ndata(\"TITANIC3\")\n\nTITANIC3$survived <- factor(x = TITANIC3$survived, \n                            labels = c(\"No\", \"Yes\"))\n\ntable(TITANIC3$survived)\n```\n:::\n`r unhide()`\n::::\n:::\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container .webex-check}\nWhat proportion of passengers survived the Titanic sinking?\n`r fitb(c(\"0.4\", \"0.38\", \"0.382\", \"0.3820\", \"0.38197\", \"0.381971\"))`\n\n`r hide(\"Solution\")`\nWe can find the proportion of survivors by using the `prop.table()` function.\n\n::: panel-tabset\n## R Code\n```{r, eval = FALSE}\nprop.table(table(TITANIC3$survived))\n```\n\n## Output\n```{r, echo = FALSE}\nprop.table(table(TITANIC3$survived))\n```\n:::\n`r unhide()`\n::::\n:::\n\n---\n\nSee [Section 2.3.1 Tables](https://read.kortext.com/reader/pdf/92741/98){target=\"_blank\"} of *Probability and Statistics with R* to read more about presenting qualitative data in frequency and proportion tables.\n\n\n## Barplots {#sec-bars}\n\nBarplots are a way to graphically summarise qualitative data. You will most likely have seen many barplots before, but now we're going to learn how to create our own.\n\nThe function used to create barplots in R is `barplot()`. It takes the following arguments:\n\n* `height =`: this is the vector or matrix which contains a summary of the qualitative data; this could be a frequency table or a table of proportions.\n* `col =`: this is a vector of colours to be used for the bars in the barplot. If you want to see a list of colour names that R can use, run the code `colors()` - there are also documents online which will show you the actual colours too!\n* `main =`: this is the main title of the plot.\n* `xlab =`: this is a label for along the x-axis.\n* `ylab =`: this is a label for along the y-axis.\n* `ylim =`: this is a vector giving the limits that the y-axis should be spread over.\n\nThe only essential argument to give to `barplot()` is `height =`. For a full list of the arguments that can be used within `barplot()`, use the code `help(\"barplot\")`.\n\nWe can create a barplot showing the number of patients from `EPIDURAL` that fall into each level of `ease` using the following code.\n\n::: panel-tabset\n## R Code\n```{r qual4.1, eval = FALSE}\nbarplot(height = epi_freq,\n        col = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n        main = \"Ease of Locating Anesthesia Administering Location in Patients\",\n        xlab = \"Ease\",\n        ylab = \"Frequency\")\n```\n\n## Plots\n```{r qual4.2, echo = FALSE}\nbarplot(height = epi_freq,\n        col = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n        main = \"Ease of Locating Anesthesia Administering Location in Patients\",\n        xlab = \"Ease\",\n        ylab = \"Frequency\")\n```\n:::\n\nWe can also use the table of proportions `epi_prop` to create a barplot, this time showing the proportion of patients in each level of ease, rather than the frequency.\n\n::: panel-tabset\n## R Code\n```{r qual5.1, eval = FALSE}\nbarplot(height = epi_prop,\n        col = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n        main = \"Ease of Locating Anesthesia Administering Location in Patients\",\n        xlab = \"Ease\",\n        ylab = \"Proportion\")\n```\n\n## Plots\n```{r qual5.2, echo = FALSE}\nbarplot(height = epi_prop,\n        col = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n        main = \"Ease of Locating Anesthesia Administering Location in Patients\",\n        xlab = \"Ease\",\n        ylab = \"Proportion\")\n```\n:::\n\nNotice that the shapes of both these barplots are identical. The only difference between them is the scale used on the y-axis.\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container .webex-check}\nComplete the code below to create a barplot which shows the number of passengers on the Titanic belonging to 1^st^, 2^nd^ and 3^rd^ class respectively.\n\n::: panel-tabset\n## R Code\n\n::: {.webex-code}\n`r fitb(c(\"barplot\"))``(``r fitb(c(\"height\"))`` = table(TITANIC3$pclass),`\n<ul style=\"margin-top: 0em; margin-left: 3em;\">\n`col = c(\"gray32\", \"gray95\", \"seashell3\"),`\n</ul>\n<ul style=\"margin-top: -0.9em; margin-left: 3em;\">\n`r fitb(c(\"main\"))`` = \"Number of Titanic Passengers in each Class\",`\n</ul>\n<ul style=\"margin-top: -0.9em; margin-left: 3em;\">\n`xlab = ``r fitb(c(\"\\\"Class\\\"\"))``,`\n`ylab = \"Frequency\")`\n</ul>\n:::\n\n## Plots\n```{r qual-ans4.0, echo = FALSE}\nbarplot(height = table(TITANIC3$pclass),\n        col = c(\"gray32\", \"gray95\", \"seashell3\"),\n        main = \"Number of Titanic Passengers in each Class\",\n        xlab = \"Class\",\n        ylab = \"Frequency\")\n```\n:::\n\n`r hide(\"Solution\")`\n::: panel-tabset\n## R Code\n```{r qual-ans4.1, eval = FALSE}\nbarplot(height = table(TITANIC3$pclass),\n        col = c(\"gray32\", \"gray95\", \"seashell3\"),\n        main = \"Number of Titanic Passengers in each Class\",\n        xlab = \"Class\",\n        ylab = \"Frequency\")\n```\n\n## Plots\n```{r qual-ans4.2, echo = FALSE}\nbarplot(height = table(TITANIC3$pclass),\n        col = c(\"gray32\", \"gray95\", \"seashell3\"),\n        main = \"Number of Titanic Passengers in each Class\",\n        xlab = \"Class\",\n        ylab = \"Frequency\")\n```\n:::\n`r unhide()`\n::::\n:::\n\n---\n\nYou can see further examples of creating barplots in R in [Section 2.3.2 Barplots](https://read.kortext.com/reader/pdf/92741/100){target=\"_blank\"} of *Probability and Statistics with R*.\n\n\n\n## Dot Charts {#sec-dots}\n\nDot charts show similar information to barplots and summarise qualitative data. They show a dot for each level of a categorical variable which indicates the frequency of that level (see below for an example).\n\nDot charts can be made in R using the function `dotchart()`. This takes similar arguments to those used by `barplot()` above, including:\n\n* `x =`: this is the vector or matrix which contains a summary of the qualitative data; this could be a frequency table or a table of proportions.\n* `bg =`: this is the colour to be used inside the dot.\n\nAgain, the only essential argument to provide is `x =`.\n\nWe can create a dot chart showing the number of patients from `EPIDURAL` in each level of `ease` using the following code.\n\n::: panel-tabset\n## R Code\n```{r qual6.1, eval = FALSE}\ndotchart(x = epi_freq,\n         bg = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n         main = \"Ease of Locating Anesthesia Administering Location in Patients\",\n         xlab = \"Frequency\",\n         ylab = \"Ease\")\n```\n\n## Plots\n```{r qual6.2, echo = FALSE, warning = FALSE}\ndotchart(x = epi_freq,\n         bg = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n         main = \"Ease of Locating Anesthesia Administering Location in Patients\",\n         xlab = \"Frequency\",\n         ylab = \"Ease\")\n```\n:::\n\n---\n\nSee [Section 2.3.3 Dot Charts](https://read.kortext.com/reader/pdf/92741/100){target=\"_blank\"} of *Probability and Statistics with R* to learn more about constructing these plots.\n\n\n## Pie Charts {#sec-pies}\n\nA third way to graphically present qualitative data is with a pie chart. These show the relative frequencies of different levels of a categorical variable as proportions of a \"pie\".\n\nPie charts are sometimes not favoured by statisticians because it can be difficult to clearly see the differences in proportions when they are very similar. Pie charts can still be used though to show the proportion of observations in a category, in relation to the total number of observations.\n\nThe function used to create pie charts is `pie()`, which takes the following arguments:\n\n* `x =`: this is the vector which summarises the qualitative data as frequencies or proportions.\n* `radius =`: this determines the size of the pie chart within your plotting window.\n* `col =`: this is a vector of colours which are to be used for each \"slice\" of the pie chart.\n\nYou can see a full list of the arguments that can be given to the `pie()` function using `help(\"pie\")`. The only necessary argument to provide is `x =`.\n\nWe can create a pie chart showing the proportion of patients in each level of `ease` using the code below.\n\n::: panel-tabset\n## R Code\n```{r qual7.1, eval = FALSE}\npie(x = epi_prop,\n    radius = 0.9,\n    col = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n    main = \"Ease of Locating Anesthesia Administering Location in Patients\")\n```\n\n## Plots\n```{r qual7.2, echo = FALSE}\npie(x = epi_prop,\n    radius = 0.9,\n    col = c(\"darkslategray\", \"darkslategray4\", \"darkslategray3\"),\n    main = \"Ease of Locating Anesthesia Administering Location in Patients\")\n```\n:::\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container}\nCreate a pie chart showing the proportion of passengers on the Titanic in each class.\n\n::: panel-tabset\n## R Code\n::: {.webex-code}\n`r fitb(\"pie\")``(x = table(TITANIC3$``r mcq(sample(c(answer = \"pclass\", \"survived\", \"sex\", \"class\")))``),`\n\n<ul style=\"margin-top: -0.8em; margin-left: 1em;\">\n`col = c(\"gray32\", \"gray95\", \"seashell3\"),`\n</ul>\n<ul style=\"margin-top: -0.8em; margin-left: 1.4em;\">\n`r fitb(\"main\")``= \"Class of Titanic Passengers\")`\n</ul>\n:::\n\n## Plot\n```{r qual-ans5.0, echo = FALSE}\npie(x = table(TITANIC3$pclass),\n    col = c(\"gray32\", \"gray95\", \"seashell3\"),\n    main = \"Class of Titanic Passengers\")\n```\n:::\n\n`r hide(\"Solution\")`\n::: panel-tabset\n## R Code\n```{r qual-ans5.1, eval = FALSE}\npie(x = table(TITANIC3$pclass),\n    col = c(\"gray32\", \"gray95\", \"seashell3\"),\n    main = \"Class of Titanic Passengers\")\n```\n\n## Plots\n```{r qual-ans5.2, echo = FALSE}\npie(x = table(TITANIC3$pclass),\n    col = c(\"gray32\", \"gray95\", \"seashell3\"),\n    main = \"Class of Titanic Passengers\")\n```\n:::\n`r unhide()`\n::::\n:::\n\n---\n\n[Section 2.3.4 Pie Charts](https://read.kortext.com/reader/pdf/92741/103){target=\"_blank\"} of *Probability and Statistics with R* gives additional examples of constructing pie charts.\n\n\n## Bivariate Data {#sec-bi}\n\nSo far, we have looked at different ways to visualise information about one categorical (or qualitative) variable. Because only one variable has been considered, it is called univariate data.\n\nWe will now turn our attention to bivariate categorical data. This means we will look at ways to visualise information about two categorical variables at the same time. We can expand upon some of the methods we have already learned to allow two categorical variables to be considered.\n\nIn @sec-tables we looked at the use of the `table()` function to create frequency tables for one categorical variable. We can expand upon the use of this function so that frequency tables of two categorical variables can be created. These are known as two-way contingency tables.\n\nIn order to create a two-way contingency table, simply provide the second categorical variable you wish to use as an additional argument.\n\nThe data set `EPIDURAL` contains a variable `doctor` which indicates the physician (`\"Dr. A\"`, `\"Dr. B\"`, `\"Dr. C\"` or `\"Dr. D\"`) who administered the epidural anesthesia. @tbl-contingency shows the number of patients who fall into each level of the `doctor` and `ease` variables.\n\n```{r contingency-table, echo=FALSE}\n#| tbl-cap: \"Two-way contingency table of `Doctor` by `Ease`.\"\n#| label: tbl-contingency\n\ntab <- as.matrix(table(EPIDURAL$doctor, EPIDURAL$ease))\n\nkable(tab) %>%\n  column_spec(1, bold=TRUE)\n```\n\nWe can recreate @tbl-contingency in R using the following code.\n\n::: panel-tabset\n## R Code\n```{r qual8.1, eval = FALSE}\nepi_tab <- table(EPIDURAL$doctor, EPIDURAL$ease)\nepi_tab\n```\n\n## Output\n```{r qual8.2, echo = FALSE}\nepi_tab <- table(EPIDURAL$doctor, EPIDURAL$ease)\nepi_tab\n```\n:::\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container}\nCreate a two-way contingency table showing the number of passengers who survived and did not survive in each of the three classes (1^st^, 2^nd^ and 3^rd^).\n\n`r hide(\"Solution\")`\n::: panel-tabset\n## R Code\n```{r qual-ans6.1, eval = FALSE}\ntable(TITANIC3$pclass, TITANIC3$survived)\n```\n\n## Output\n```{r qual-ans6.2, echo = FALSE}\ntable(TITANIC3$pclass, TITANIC3$survived)\n```\n:::\n`r unhide()`\n::::\n:::\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container .webex-check}\nHow many 3^rd^ class passengers survived the sinking of the Titanic?\n`r fitb(181)`\n::::\n:::\n\nBarplots are a useful tool to present the information from a two-way contingency table graphically. For example, we can produce a barplot, which shows the same counts as in @tbl-contingency, using the following code.\n\n::: panel-tabset\n## R Code\n```{r qual9.1, eval = FALSE}\nbarplot(height = epi_tab,\n        legend.text = TRUE,\n        col = c(\"seashell\", \"rosybrown2\", \"thistle\", \"snow4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Ease\",\n        ylab = \"Frequency\")\n```\n\n## Plots\n```{r qual9.2, echo = FALSE}\nbarplot(height = epi_tab,\n        legend.text = TRUE,\n        col = c(\"seashell\", \"rosybrown2\", \"thistle\", \"snow4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Ease\",\n        ylab = \"Frequency\")\n```\n:::\n\nThis code uses the `barplot()` function introduced in @sec-bars and provides the two-way contingency table `epi_tab` to the argument `height =`. This means that all the values in this table will be used to construct the height of the bars. Because the bars for each doctor are on top of each other, this is known as a \"stacked\" barplot.\n\nThe argument `legend.text = TRUE` has also been included so that a legend, indicating the different physicians, is included in the plot.\n\nIf we instead wanted to produce a barplot where there is a separate bar for each doctor within each level of the `ease` variable, then we need to include the argument `beside = TRUE`.\n\n::: panel-tabset\n## R Code\n```{r qual10.1, eval = FALSE}\nbarplot(height = epi_tab,\n        legend.text = TRUE,\n        beside = TRUE,\n        col = c(\"seashell\", \"rosybrown2\", \"thistle\", \"snow4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Ease\",\n        ylab = \"Frequency\")\n```\n\n## Plots\n```{r qual10.2, echo = FALSE}\nbarplot(height = epi_tab,\n        legend.text = TRUE,\n        beside = TRUE,\n        col = c(\"seashell\", \"rosybrown2\", \"thistle\", \"snow4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Ease\",\n        ylab = \"Frequency\")\n```\n:::\n\nAnother option for presenting this information would be to create a barplot where the different doctors are along the x-axis and the levels of `ease` are used to create the individual bars. In order to do this, we need to transpose the two-way contingency table that is given to the `height =` argument in the `barplot()` function.\n\nTransposing a table can easily be achieved using the function `t()`. The only argument needed is the table you wish to transpose.\n\n::: panel-tabset\n## R Code\n```{r qual11.1, eval = FALSE}\nt(epi_tab)\n```\n\n## Output\n```{r qual11.2, echo = FALSE}\nt(epi_tab)\n```\n:::\n\nWe can then create the following barplots using the transposed `epi_tab` table.\n\n::: panel-tabset\n## R Code\n```{r qual12.1.1, eval = FALSE}\nbarplot(height = t(epi_tab),\n        legend.text = TRUE,\n        col = c(\"darkslategray\", \"darkslategray3\", \"darkslategray4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Doctor\",\n        ylab = \"Frequency\")\n```\n\n## Plots\n```{r qual12.1.2, echo = FALSE}\npar(mar = c(5, 4, 4, 6.5))\nbarplot(height = t(epi_tab),\n        legend.text = TRUE,\n        args.legend = list(x = \"topright\",\n                           inset = c(-0.24, 0),\n                           xpd = TRUE),\n        col = c(\"darkslategray\", \"darkslategray3\", \"darkslategray4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Doctor\",\n        ylab = \"Frequency\")\n```\n:::\n\n::: panel-tabset\n## R Code\n```{r qual12.2.1, eval = FALSE}\nbarplot(height = t(epi_tab),\n        legend.text = TRUE,\n        beside = TRUE,\n        col = c(\"darkslategray\", \"darkslategray3\", \"darkslategray4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Doctor\",\n        ylab = \"Frequency\")\n```\n\n## Plots\n```{r qual12.2.2, echo = FALSE}\nbarplot(height = t(epi_tab),\n        legend.text = TRUE,\n        beside = TRUE,\n        col = c(\"darkslategray\", \"darkslategray3\", \"darkslategray4\"),\n        main = \"Number of patients treated by each physician in each level of Ease\",\n        xlab = \"Doctor\",\n        ylab = \"Frequency\")\n```\n:::\n\nIt is often better to present relationships using proportions, rather than counts. In order to calculate the proportions (either out of the total number of observations, row totals or column totals) from a two-way contingency table, we can use the function `prop.table()`.\n\nTo create a barplot which shows the proportion of patients who were in each level of the `ease` variable out of the total number of patients seen by a given doctor, we would first need to calculate these proportions in `epi_tab`. This can be done by using the argument `margin = 1` within the `prop.table()` function.\n\n::: panel-tabset\n## R Code\n```{r qual13.1, eval = FALSE}\nepi_prop_tab <- prop.table(x = epi_tab, margin = 1)\nepi_prop_tab\n```\n\n## Output\n```{r qual13.2, echo = FALSE}\nepi_prop_tab <- prop.table(x = epi_tab, margin = 1)\nepi_prop_tab\n```\n:::\n\nNow we can see, for example, that Dr. A found it easy to feel the bone landmarks of 82.6% of their patients, found it difficult in 13.0% of their patients and impossible in 4.3% of their patients.\n\nWe can graphically present these proportions for all doctors in a barplot using the following code. Because the proportions are calculated out of the total number of patients each doctor has seen, it makes sense to plot the physicians along the x-axis.\n\n::: panel-tabset\n## R Code\n```{r qual14.1, eval = FALSE}\nbarplot(height = t(epi_prop_tab),\n        legend.text = TRUE,\n        beside = TRUE,\n        col = c(\"darkslategray\", \"darkslategray3\", \"darkslategray4\"),\n        main = \"Proportion of doctor's patients in each level of Ease variable\",\n        xlab = \"Doctor\",\n        ylab = \"Proportion\")\n```\n\n## Plots\n```{r qual14.2, echo = FALSE}\npar(mar = c(5, 4, 4, 2.3))\nbarplot(height = t(epi_prop_tab),\n        legend.text = TRUE,\n        args.legend = list(x = \"topright\",\n                           inset = c(-0.08, 0),\n                           xpd = TRUE),\n        beside = TRUE,\n        col = c(\"darkslategray\", \"darkslategray3\", \"darkslategray4\"),\n        main = \"Proportion of doctor's patients in each level of Ease variable\",\n        xlab = \"Doctor\",\n        ylab = \"Proportion\")\n```\n:::\n\n:::{.question}\n::::{.question-header}\nTask\n::::\n::::{.question-container}\nCreate the following barplot showing the proportion of passengers in each class who survived and the proportion who did not.\n\n::: panel-tabset\n## Plots\n```{r qual-ans7.0, echo = FALSE}\nsurv_prop <- prop.table(table(TITANIC3$pclass, TITANIC3$survived), margin = 1)\n\nbarplot(height = t(surv_prop),\n        legend.text = TRUE,\n        beside = TRUE,\n        main = \"Proportion of Passengers Surviving the Titanic Sinking in each Class\",\n        xlab = \"Class\",\n        ylab = \"Proportion\")\n```\n:::\n\n`r hide(\"Solution\")`\n::: panel-tabset\n## R Code\n```{r qual-ans7.1, eval = FALSE}\nsurv_prop <- prop.table(table(TITANIC3$pclass, TITANIC3$survived), margin = 1)\n\nbarplot(height = t(surv_prop),\n        legend.text = TRUE,\n        beside = TRUE,\n        main = \"Proportion of Passengers Surviving the Titanic Sinking in each Class\",\n        xlab = \"Class\",\n        ylab = \"Proportion\")\n```\n\n## Plots\n```{r qual-ans7,2, echo = FALSE}\nsurv_prop <- prop.table(table(TITANIC3$pclass, TITANIC3$survived), margin = 1)\n\nbarplot(height = t(surv_prop),\n        legend.text = TRUE,\n        beside = TRUE,\n        main = \"Proportion of Passengers Surviving the Titanic Sinking in each Class\",\n        xlab = \"Class\",\n        ylab = \"Proportion\")\n```\n:::\n`r unhide()`\n::::\n:::\n\n---\n\nTo learn more about presenting bivariate qualitative data, see Sections [2.7.1 Two-Way Contingency Tables](https://read.kortext.com/reader/pdf/92741/134){target=\"_blank\"} and [2.7.2 Graphical Representations of Two-Way Contingency Tables](https://read.kortext.com/reader/pdf/92741/136){target=\"_blank\"} of *Probability and Statistics with R*.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css","include/webex.css"],"toc":true,"include-after-body":["include/webex.js"],"embed-resources":true,"output-file":"01-qualitative.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.553","editor":"source","theme":["cosmo","custom.scss"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}